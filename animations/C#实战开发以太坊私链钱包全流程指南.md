# C#å®æˆ˜å¼€å‘ä»¥å¤ªåŠç§é“¾é’±åŒ…å…¨æµç¨‹æŒ‡å—

## ä»¥å¤ªåŠç§é“¾æ­å»ºä¸é’±åŒ…å¯¹æ¥æ ¸å¿ƒè¦ç‚¹
åœ¨åŒºå—é“¾åº”ç”¨å¼€å‘ä¸­ï¼Œæ­å»ºç§æœ‰é“¾å¹¶å®ç°é’±åŒ…å¯¹æ¥æ˜¯æ ¸å¿ƒç¯èŠ‚ã€‚æœ¬ç« èŠ‚å°†è¯¦è§£åŸºäº.NET Coreçš„ä»¥å¤ªåŠç§é“¾é’±åŒ…å¼€å‘æµç¨‹ï¼Œé‡ç‚¹è§£æé’±åŒ…å¯¹æ¥æŠ€æœ¯éš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆã€‚

### ç§é“¾é’±åŒ…è¿è¡Œç¯å¢ƒé…ç½®
#### Ethereum Walletå®¢æˆ·ç«¯é…ç½®
é€šè¿‡å‘½ä»¤è¡Œå¯åŠ¨é’±åŒ…æ—¶éœ€æŒ‡å®šRPCæ¥å£åœ°å€ï¼Œå¸¸è§é…ç½®æ–¹å¼åŒ…å«ä¸¤ç§ï¼š
```bash
# æœ¬åœ°IPCé€šé“è¿æ¥
"F:\\Program Files\\Ethereum-Wallet\\Ethereum Wallet.exe" --rpc "\\\\.\\pipe\\geth.ipc"

# TCPåè®®è¿œç¨‹è¿æ¥
"F:\\Program Files\\Ethereum-Wallet\\Ethereum Wallet.exe" --rpc "http://127.0.0.1:8544"
```
> å»ºè®®ä½¿ç”¨IPCé€šé“è¿›è¡Œæœ¬åœ°å¼€å‘ï¼Œå…·æœ‰æ›´é«˜çš„å®‰å…¨æ€§ä¸é€šä¿¡æ•ˆç‡ã€‚å½“éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒæ—¶ï¼Œå¯åˆ‡æ¢ä¸ºHTTPSåŠ å¯†çš„RPCæ¥å£ã€‚

ğŸ‘‰ [äº†è§£æ›´å¤šä¸“ä¸šåŒºå—é“¾å¼€å‘å·¥å…·](https://bit.ly/okx_welcome)

#### ç§é“¾éªŒè¯æ ‡è¯†è¯†åˆ«
æˆåŠŸè¿æ¥ç§é“¾åï¼Œé’±åŒ…ç•Œé¢ä¼šæ˜¾ç¤ºä¸“å±ç½‘ç»œæ ‡è¯†ã€‚ç”¨æˆ·å¯é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯è¿æ¥çŠ¶æ€ï¼š
1. æŸ¥çœ‹è´¦æˆ·ä½™é¢æ˜¯å¦æ˜¾ç¤ºè‡ªå®šä¹‰åˆ›ä¸–åŒºå—åˆ†é…çš„åˆå§‹é‡‘é¢
2. æ£€æŸ¥åŒºå—æµè§ˆå™¨æ˜¯å¦æ˜¾ç¤ºç§é“¾ç‰¹æœ‰çš„åˆ›ä¸–å—å“ˆå¸Œå€¼
3. éªŒè¯äº¤æ˜“ç¡®è®¤é€Ÿåº¦æ˜¯å¦ç¬¦åˆç§é“¾è®¾ç½®çš„å‡ºå—æ—¶é—´å‚æ•°

### é’±åŒ…æ“ä½œä¸è´¦æˆ·ç®¡ç†
#### è´¦æˆ·æ–‡ä»¶å­˜å‚¨è·¯å¾„
Windowsç³»ç»Ÿé»˜è®¤å­˜å‚¨è·¯å¾„ä¸ºï¼š
```
C:\Users\ç”¨æˆ·å\AppData\Roaming\Ethereum\wallets
```
Linuxç³»ç»Ÿè·¯å¾„ï¼š
```
~/.ethereum/wallets
```
å¯é€šè¿‡æ›¿æ¢keystoreæ–‡ä»¶å®ç°è´¦æˆ·è¿ç§»ï¼Œæ–°å¢è´¦æˆ·éœ€éµå¾ªä»¥ä¸‹è§„èŒƒï¼š
```csharp
// C#åˆ›å»ºæ–°è´¦æˆ·ç¤ºä¾‹ä»£ç 
var account = new Account("your_password");
File.WriteAllText("keystore.json", account.ToJson());
```

#### äº¤æ˜“å‘èµ·ä¸éªŒè¯
æ‰§è¡Œè½¬è´¦æ“ä½œéœ€æ³¨æ„ï¼š
- Gasä»·æ ¼è®¾ç½®å»ºè®®ä¿æŒåœ¨20-100 GweiåŒºé—´
- ç¡®è®¤æ¥æ”¶æ–¹åœ°å€æ ¼å¼ç¬¦åˆEIP-55æ ‡å‡†
- äº¤æ˜“å›æ‰§éœ€éªŒè¯åŒºå—ç¡®è®¤æ•°â‰¥12

### æ™ºèƒ½åˆçº¦éƒ¨ç½²ä¼˜åŒ–æ–¹æ¡ˆ
#### Gethå‘½ä»¤è¡Œéƒ¨ç½²æµç¨‹
```bash
# ç¼–è¯‘åˆçº¦
solc --combined-json abi,bin contract.sol > contract.json

# éƒ¨ç½²åˆçº¦
geth attach ipc:\\.\pipe\geth.ipc
> var contract = eth.contract(ABI).new({data: '0x'+BIN, from: eth.accounts[0], gas: 3000000})
```

#### C#æ™ºèƒ½åˆçº¦äº¤äº’
ä½¿ç”¨Nethereumåº“å®ç°åˆçº¦è°ƒç”¨ï¼š
```csharp
var web3 = new Web3("http://localhost:8544");
var contractHandler = web3.Eth.GetContractHandler("CONTRACT_ADDRESS");
var transaction = await contractHandler.SendRequestAsync<FunctionMessage>(new MyFunctionMessage());
```
ğŸ‘‰ [æ¢ç´¢é«˜æ•ˆåŒºå—é“¾å¼€å‘æ¡†æ¶](https://bit.ly/okx_welcome)

### åŒºå—åŒæ­¥ä¼˜åŒ–ç­–ç•¥
#### å¿«é€ŸåŒæ­¥æ¨¡å¼é…ç½®
```bash
geth --syncmode "fast" --cache=1024 --networkid 1234
```
å‚æ•°è¯´æ˜ï¼š
| å‚æ•° | æ¨èå€¼ | è¯´æ˜ |
|-------|--------|------|
| syncmode | fast | å¿«é€ŸåŒæ­¥æ¨¡å¼ |
| cache | 1024 | ç¼“å­˜å¤§å°(MB) |
| networkid | 1234 | è‡ªå®šä¹‰ç½‘ç»œID |

#### å¡é¡¿é—®é¢˜è§£å†³æ–¹æ¡ˆ
å½“å‡ºç°é’±åŒ…å¡é¡¿æ—¶å¯å°è¯•ï¼š
1. æ¸…ç†åŒºå—é“¾ç¼“å­˜æ•°æ®ï¼ˆ`geth removedb`ï¼‰
2. å‡çº§SSDç¡¬ç›˜å¹¶ä¼˜åŒ–IOæ€§èƒ½
3. é™åˆ¶æœ€å¤§è¿æ¥æ•°ï¼ˆ`--maxpeers 25`ï¼‰

## å¸¸è§é—®é¢˜è§£ç­”ï¼ˆFAQï¼‰
**Qï¼šå¦‚ä½•éªŒè¯ç§é“¾æ˜¯å¦æˆåŠŸæ­å»ºï¼Ÿ**  
Aï¼šé€šè¿‡gethæ§åˆ¶å°æ‰§è¡Œ`eth.blockNumber`æŸ¥çœ‹åŒºå—é«˜åº¦ï¼Œè‹¥æŒç»­å¢é•¿åˆ™è¯´æ˜èŠ‚ç‚¹è¿è¡Œæ­£å¸¸ã€‚

**Qï¼šé’±åŒ…è¿æ¥ç§é“¾æ—¶æç¤º"Connection Refused"æ€ä¹ˆåŠï¼Ÿ**  
Aï¼šè¯·æ£€æŸ¥gethèŠ‚ç‚¹æ˜¯å¦å·²å¯åŠ¨ï¼Œç¡®è®¤RPCç«¯å£æœªè¢«é˜²ç«å¢™é˜»æŒ¡ï¼Œå»ºè®®ä½¿ç”¨`netstat -ano`å‘½ä»¤æ’æŸ¥ç«¯å£ç›‘å¬çŠ¶æ€ã€‚

**Qï¼šC#å¼€å‘å¦‚ä½•å®ç°æ‰¹é‡è½¬è´¦åŠŸèƒ½ï¼Ÿ**  
Aï¼šå¯é€šè¿‡æ„å»ºç¦»çº¿äº¤æ˜“é˜Ÿåˆ—ï¼Œä½¿ç”¨`TransactionSigner`æ‰¹é‡ç­¾ååé€šè¿‡`eth_sendRawTransaction`æ¥å£æäº¤ã€‚

**Qï¼šç§é“¾Gasæ¶ˆè€—å¼‚å¸¸å¦‚ä½•æ’æŸ¥ï¼Ÿ**  
Aï¼šå»ºè®®ä½¿ç”¨`debug.traceTransaction`åˆ†æäº¤æ˜“æ‰§è¡Œè·¯å¾„ï¼Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨å¼‚å¸¸æ—¥å¿—æˆ–æ— é™å¾ªç¯æ¼æ´ã€‚

## å¼€å‘æœ€ä½³å®è·µ
### è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ç¼–å†™
```powershell
# å¯åŠ¨ç§é“¾èŠ‚ç‚¹
Start-Process geth --networkid 1234 --http --http.addr 0.0.0.0 --http.port 8544 --http.api "eth,net,web3,personal" --http.corsdomain "*" --nodiscover --allow-insecure-unlock

# è‡ªåŠ¨åˆ›å»ºè´¦æˆ·
$account = & geth account new --password <(echo "123456")
$address = $account | Select-String -Pattern "0x[a-zA-Z0-9]{40}" | ForEach-Object { $_.Matches.Value }
```

### å®‰å…¨åŠ å›ºæªæ–½
1. å¯ç”¨è´¦æˆ·åŠ å¯†å­˜å‚¨ï¼ˆ`--unlock`å‚æ•°ç¦æ­¢åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ï¼‰
2. é…ç½®CORSåŸŸåç™½åå•
3. ä½¿ç”¨HTTPSåŠ å¯†RPCé€šä¿¡ï¼ˆéœ€é…ç½®`--http.certfile`å’Œ`--http.keyfile`ï¼‰

ğŸ‘‰ [è·å–ä¼ä¸šçº§åŒºå—é“¾è§£å†³æ–¹æ¡ˆ](https://bit.ly/okx_welcome)

## æ€§èƒ½è°ƒä¼˜å‚æ•°å¯¹ç…§è¡¨
| å‚æ•° | å¼€å‘ç¯å¢ƒ | ç”Ÿäº§ç¯å¢ƒ | è¯´æ˜ |
|-------|--------|--------|------|
| --cache | 512 | 4096 | æ•°æ®åº“ç¼“å­˜å¤§å° |
| --maxpeers | 12 | 50 | æœ€å¤§ç½‘ç»œè¿æ¥æ•° |
| --gasprice | 20000000000 | 100000000000 | æœ€å°Gasä»·æ ¼(wei) |
| --txpool.globalslots | 5000 | 20000 | äº¤æ˜“æ± æ§½ä½æ•° |

é€šè¿‡ä»¥ä¸ŠæŠ€æœ¯æ–¹æ¡ˆçš„å®æ–½ï¼Œå¼€å‘è€…å¯æ„å»ºç¨³å®šå¯é çš„ä»¥å¤ªåŠç§é“¾é’±åŒ…ç³»ç»Ÿã€‚å»ºè®®ç»“åˆå…·ä½“ä¸šåŠ¡éœ€æ±‚é€‰æ‹©åˆé€‚çš„éƒ¨ç½²æ¨¡å¼ï¼Œå¹¶æŒç»­å…³æ³¨åŒºå—é“¾æŠ€æœ¯çš„æœ€æ–°å‘å±•ã€‚